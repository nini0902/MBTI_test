<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ²’å¿…è¦ä½†æŒºæçš„æ¸¬é©—</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-bg: #1e1e2d;
            --secondary-bg: #2b2b3d;
            --accent-color: #7c3aed;
            --text-color: #ffffff;
            --text-secondary: #ffffff;
            --card-bg: #252636;
            --highlight: #9f7aea;
            --border-color: #374151;
        }

        body {
            background-color: var(--primary-bg);
            color: var(--text-color);
        }

        .navbar-brand, 
        .nav-link,
        .nav-tabs .nav-link,
        .card,
        .btn-primary,
        .option-btn,
        .testimonial-text,
        .testimonial-author,
        .footer-link,
        .compatibility-item,
        .personality-item,
        p, h1, h2, h3, h4, h5, h6,
        .text-secondary,
        .description,
        .mbti-code,
        .mbti-name,
        .feature-list li,
        .personality-stats,
        .footer-heading,
        .footer-link {
            color: var(--text-color) !important;
        }

        .nav-tabs .nav-link:hover {
            color: var(--highlight) !important;
        }

        .footer-link:hover {
            color: var(--highlight) !important;
        }

        .navbar {
            background: var(--secondary-bg);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
        }

        .nav-tabs {
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 2rem;
        }

        .nav-tabs .nav-link {
            color: var(--text-secondary);
            border: none;
            padding: 1rem 2rem;
            margin-right: 0.5rem;
            border-radius: 0.5rem 0.5rem 0 0;
            transition: all 0.3s ease;
        }

        .nav-tabs .nav-link.active {
            color: var(--highlight);
            background: var(--card-bg);
            border-bottom: 3px solid var(--highlight);
        }

        .nav-tabs .nav-link:hover {
            color: var(--text-color);
            background: var(--secondary-bg);
        }

        .container {
            max-width: 900px;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .btn-primary {
            background: var(--accent-color);
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: #5652c7;
            transform: translateY(-2px);
        }

        .progress-bar {
            height: 8px;
            background: #444;
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-color);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .question-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        #question-text {
            color: var(--text-color);
            font-size: 1.2em;
            margin-bottom: 1.5rem;
        }

        .option-btn {
            width: 100%;
            padding: 1rem;
            margin: 0.5rem 0;
            background: var(--secondary-bg);
            border: 2px solid var(--accent-color);
            color: var(--text-color);
            font-size: 1.1em;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            background: var(--accent-color);
            color: var(--text-color);
            transform: translateY(-2px);
        }

        .result-card {
            text-align: center;
        }

        .personality-chart {
            max-width: 600px;
            margin: 2rem auto;
        }

        .mbti-emoji {
            font-size: 4em;
            margin: 1rem 0;
        }

        .mbti-code {
            font-size: 2.5em;
            color: var(--accent-color);
            margin: 1rem 0;
        }

        .description {
            color: var(--text-color);
            font-size: 1.1em;
            line-height: 1.8;
            margin: 1.5rem 0;
        }

        .personality-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            padding: 1rem;
        }

        .personality-item {
            background: var(--secondary-bg);
            padding: 1.5rem;
            border-radius: 12px;
            transition: transform 0.3s ease;
        }

        .personality-item:hover {
            transform: translateY(-5px);
        }

        .personality-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        .tab-content {
            min-height: 400px;
        }

        #all-personalities {
            display: none;
        }

        #all-personalities.active {
            display: block;
        }

        .share-button {
            background: var(--accent-color);
            color: var(--text-color);
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 30px;
            margin: 1rem;
            transition: all 0.3s ease;
        }

        .share-button:hover {
            background: #5652c7;
            transform: translateY(-2px);
        }

        .testimonial-card {
            background: var(--secondary-bg);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            border-left: 4px solid var(--highlight);
        }

        .testimonial-text {
            color: var(--text-color);
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .testimonial-author {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 1rem;
        }

        .compatibility-chart {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .compatibility-item {
            background: var(--secondary-bg);
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid;
            color: var(--text-color);
        }

        .compatibility-good {
            border-color: #10b981;
        }

        .compatibility-bad {
            border-color: #ef4444;
        }

        footer {
            background: var(--secondary-bg);
            padding: 3rem 0;
            margin-top: 4rem;
            border-top: 1px solid var(--border-color);
        }

        .footer-heading {
            color: var(--text-color);
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
        }

        .footer-link:hover {
            color: var(--highlight);
        }

        .site-title {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--text-color);
            margin-bottom: 0;
            letter-spacing: 4px;
            position: relative;
            display: inline-block;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .site-title:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 5px;
            width: 100%;
            height: 4px;
            background: var(--accent-color);
            transform: skew(-12deg);
            opacity: 0.7;
        }

        .site-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-top: 0.8rem;
            font-weight: 500;
            letter-spacing: 1px;
            opacity: 0.9;
        }

        .navbar .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem 0;
        }

        .navbar-nav {
            margin-top: 1rem;
        }

        .accordion-item {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            margin-bottom: 0.5rem;
        }

        .accordion-button {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            padding: 1rem 1.5rem;
        }

        .accordion-button:not(.collapsed) {
            background-color: var(--accent-color);
            color: var(--text-color);
        }

        .accordion-button::after {
            filter: invert(1);
        }

        .accordion-body {
            background-color: var(--card-bg);
            color: var(--text-color);
            padding: 1.5rem;
        }

        @media (max-width: 768px) {
            .site-title {
                font-size: 2rem;
                text-align: center;
            }
            
            .site-subtitle {
                font-size: 1rem;
                text-align: center;
            }
        }
    </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <div class="text-center">
                    <h1 class="site-title">MBTI</h1>
                    <div class="site-subtitle">Might Be Totally Inaccurate</div>
                </div>
                <div class="navbar-nav ms-auto">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" onclick="showTab('test')">æ¸¬é©—</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showTab('personalities')">äººæ ¼åœ–é‘‘</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showTab('testimonials')">ç”¨æˆ¶è©•åƒ¹</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showTab('faq')">FAQ</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container my-5">
            <!-- æ¸¬é©—é é¢ -->
            <div id="test-page">
                <!-- é–‹å§‹é  -->
                <div id="start-page" class="card">
                    <h1 class="text-center site-title">MBTI</h1>
                    <div class="text-center mb-4 site-subtitle">Might Be Totally Inaccurate</div>
                    <p class="text-center mb-4">ä¾†çœ‹çœ‹ä½ åˆ°åº•æ˜¯å“ªç¨®æ²™é›•äººæ ¼ï¼Ÿ<br>è®“æˆ‘å€‘é–‹å§‹é€™è¶Ÿè’è¬¬çš„è‡ªæˆ‘æ¢ç´¢ä¹‹æ—…ï¼</p>
                    <div class="text-center">
                        <button class="btn btn-primary" onclick="startTest()">é–‹å§‹æ¸¬é©—</button>
                    </div>
                </div>

                <!-- å•é¡Œé  -->
                <div id="question-page" style="display: none;">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <div class="question-card">
                        <h3 id="question-text" class="mb-4"></h3>
                        <div class="options-container">
                            <button class="option-btn" onclick="selectOption(0)"></button>
                            <button class="option-btn" onclick="selectOption(1)"></button>
                        </div>
                    </div>
                </div>

                <!-- çµæœé  -->
                <div id="result-page" class="card result-card" style="display: none;">
                    <h2>ä½ çš„äººæ ¼åˆ†æçµæœ</h2>
                    <div class="mbti-emoji" id="mbti-emoji"></div>
                    <div class="mbti-code" id="mbti-result"></div>
                    <div class="description" id="mbti-description"></div>
                    
                    <div class="personality-chart">
                        <canvas id="personalityChart"></canvas>
                    </div>
                    
                    <div class="mt-4">
                        <button class="share-button" onclick="shareResult()">åˆ†äº«çµæœ</button>
                        <button class="btn btn-primary" onclick="retakeTest()">é‡æ–°æ¸¬é©—</button>
                    </div>
                </div>
            </div>

            <!-- äººæ ¼åœ–é‘‘é é¢ -->
            <div id="personalities-page" class="card" style="display: none;">
                <h2 class="text-center mb-4">äººæ ¼åœ–é‘‘</h2>
                <div class="personality-list" id="personality-list"></div>
            </div>

            <!-- ç”¨æˆ¶è©•åƒ¹é é¢ -->
            <div id="testimonials-page" class="card" style="display: none;">
                <h2 class="text-center mb-4">çœŸå¯¦ç”¨æˆ¶å›é¥‹</h2>
                <div class="testimonials-container">
                    <div class="testimonial-card">
                        <p class="testimonial-text">ã€Œæˆ‘ä»¥ç‚ºé€™æ˜¯å¿ƒç†æ¸¬é©—ï¼Œçµæœè¢«è¨ºæ–·æˆè¡Œèµ°çš„å•è™Ÿ â“ æˆ‘ç¾åœ¨æ•´å€‹äººéƒ½åœ¨ç–‘å•å¥è£¡é¢ã€‚ã€</p>
                        <p class="testimonial-author">- æ°¸é æä¸æ‡‚çš„å°æ˜</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">ã€Œè¢«è©•ç‚ºã€å‡è£æœ‰åœ¨è¨ˆåŠƒå‹ã€ï¼Œæ°£åˆ°æˆ‘ç«‹åˆ»åˆ—äº†ä¸‰å€‹ä»£è¾¦äº‹é …ä½†é‚„æ˜¯æ²’åšã€‚ã€</p>
                        <p class="testimonial-author">- æ°¸é æ‹–å»¶çš„é˜¿é¾</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">ã€Œèªªæˆ‘æ‰“å“ˆæ¬ æ‰“åˆ°äººé¡é€²åŒ–éƒ½èƒ½è·³ä¸‹ä¸€éšæ®µï¼Œè¬è¬ä½ å–”çœŸçš„è¶…é¼“å‹µäººã€‚ã€</p>
                        <p class="testimonial-author">- ç¡ä¸é£½çš„å°ç¾</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">ã€Œæˆ‘å®¤å‹æ¸¬å®Œç›´æ¥æ¬å‡ºå»ï¼Œèªªå¥¹ä¸æƒ³è·Ÿä¸€å€‹ã€æˆ‘å°±çˆ›å‹ã€ä½åœ¨ä¸€èµ·ã€‚æ±‚æ–°å®¤å‹ï¼ã€</p>
                        <p class="testimonial-author">- çªç„¶å¤±å»å®¤å‹çš„é˜¿è¯</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">ã€Œé€™æ¸¬é©—å”¯ä¸€æº–çš„åœ°æ–¹æ˜¯èªªæˆ‘æœƒç¬‘çˆ›ï¼Œå› ç‚ºæˆ‘çœŸçš„ç¬‘åˆ°è‚šå­ç—›ã€‚ç¬‘è‘—ç¬‘è‘—å°±å“­äº†ã€‚ã€</p>
                        <p class="testimonial-author">- æƒ…ç·’èµ·ä¼å¤§çš„å°ç‰</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">ã€Œé€™ä¸æ˜¯ MBTIï¼Œé€™æ˜¯ MBDBï¼ˆæ²’å¿…è¦ä½†æŒºç™½ç™¡ï¼‰æ¸¬é©—å§ï¼Ÿä½†æˆ‘æ€éº¼æ¸¬äº†åæ¬¡...ã€</p>
                        <p class="testimonial-author">- ä¸Šç™®çš„é˜¿å‚‘</p>
                    </div>
                </div>
            </div>

            <!-- FAQ é é¢ -->
            <div id="faq-page" class="card" style="display: none;">
                <h2 class="text-center mb-4">ğŸ¤· å¸¸è¦‹å•é¡Œ FAQï¼ˆå…¶å¯¦æ²’äººå•ï¼‰</h2>
                <div class="accordion" id="faqAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="q1">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#a1">
                                Q1ï¼šé€™å€‹äººæ ¼æ¸¬é©—æº–å—ï¼Ÿ
                            </button>
                        </h2>
                        <div id="a1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                ä¸€é»éƒ½ä¸æº–ï¼Œä½†è‡³å°‘å®ƒä¸æœƒå·ä½ è³‡æ–™ï¼ˆæ‡‰è©²å•¦ï¼‰ã€‚
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="q2">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2">
                                Q2ï¼šç‚ºä»€éº¼æˆ‘æœƒè¢«åˆ¤å®šç‚º ZZZLï¼Ÿ
                            </button>
                        </h2>
                        <div id="a2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                å› ç‚ºä½ ç­”é¡Œæ™‚æœ‰ 40% çš„æ™‚é–“åœ¨ç™¼å‘†ï¼Œæˆ‘å€‘çš„ç³»çµ±çœ‹å¾—ä¸€æ¸…äºŒæ¥šï¼ˆå…¶å¯¦åªæ˜¯äº‚æŠ“ï¼‰ã€‚
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="q3">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a3">
                                Q3ï¼šå¯ä»¥é‡æ¸¬å—ï¼Ÿ
                            </button>
                        </h2>
                        <div id="a3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                ç•¶ç„¶å¯ä»¥ï¼Œæˆ‘å€‘å®Œå…¨ä¸è² è²¬çµæœä¸€è‡´æ€§ã€‚æƒ³ç©å¹¾æ¬¡å°±ç©å¹¾æ¬¡ï¼Œä½›ç³»ç¶“ç‡Ÿã€‚
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="q4">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a4">
                                Q4ï¼šé€™æ¸¬é©—èƒŒå¾Œæœ‰ä»€éº¼ç§‘å­¸ä¾æ“šå—ï¼Ÿ
                            </button>
                        </h2>
                        <div id="a4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                æœ‰ï¼Œç§‘å­¸åœ°äº‚å¯«çš„ä¾æ“šï¼Œè«‹æ”¾å¿ƒï¼Œæˆ‘å€‘è‡ªå·±éƒ½ä¿¡äº†ã€‚
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="q5">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a5">
                                Q5ï¼šå¯ä»¥åˆ†äº«çµ¦æœ‹å‹å—ï¼Ÿ
                            </button>
                        </h2>
                        <div id="a5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                ç•¶ç„¶å¯ä»¥ï¼Œè®“æœ‹å‹ä¹Ÿä¸€èµ·è¢«å—†ä¸€é “ï¼Œå‹æƒ…æ›´åŠ æ·±åšï¼ˆæˆ–ç ´è£‚ï¼‰ã€‚
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç›¸å®¹æ€§åˆ†æ -->
        <div class="compatibility-section" style="display: none;">
            <h3>ç›¸å®¹æ€§åˆ†æ</h3>
            <div class="compatibility-chart">
                <div class="compatibility-item compatibility-good">
                    <h4>æœ€ä½³æ‹æª”</h4>
                    <p>LMAO (ç¬‘çˆ›å‹) + WTFJ (å‡è£æœ‰åœ¨è¨ˆåŠƒå‹)<br>
                    ä¸€å€‹è² è²¬æç¬‘ï¼Œä¸€å€‹è² è²¬è¨˜éŒ„ä½†å¾ä¸åŸ·è¡Œ</p>
                </div>
                <div class="compatibility-item compatibility-bad">
                    <h4>ç½é›£çµ„åˆ</h4>
                    <p>SIGH (ç„¡è²å˜†æ¯å‹) + BRUH (æ”¤æ‰‹å‹)<br>
                    å…©å€‹éƒ½åªæœƒå˜†æ°£ï¼Œèª°éƒ½ä¸æœƒä¸»å‹•è§£æ±ºå•é¡Œ</p>
                </div>
            </div>
        </div>

        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <h5 class="footer-heading">é—œæ–¼æˆ‘å€‘</h5>
                        <p>æ³›äººæ ¼é‡å­ç³¾çºç ”ç©¶ä¸­å¿ƒæˆç«‹æ–¼2025å¹´ï¼Œå°ˆæ³¨æ–¼ç ”ç©¶å„ç¨®ä¸å‹™æ­£æ¥­çš„äººæ ¼ç‰¹è³ªã€‚</p>
                    </div>
                    <div class="col-md-4">
                        <h5 class="footer-heading">è¯çµ¡è³‡è¨Š</h5>
                        <a href="#" class="footer-link">é›»å­éƒµä»¶ï¼šcontact@quantum-mbti.com</a>
                        <a href="#" class="footer-link">åœ°å€ï¼šè–›ä¸æ ¼çš„è²“éš”å£</a>
                        <a href="#" class="footer-link">é›»è©±ï¼š(02) 2599-9999</a>
                    </div>
                    <div class="col-md-4">
                        <h5 class="footer-heading">æ³•å¾‹è³‡è¨Š</h5>
                        <a href="#" class="footer-link">éš±ç§æ¬Šæ”¿ç­–</a>
                        <a href="#" class="footer-link">ä½¿ç”¨æ¢æ¬¾</a>
                        <a href="#" class="footer-link">å…è²¬è²æ˜</a>
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-12 text-center">
                        <p class="text-secondary">Â© 2025 æ³›äººæ ¼é‡å­ç³¾çºç ”ç©¶ä¸­å¿ƒ. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </footer>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            const mbtiTypes = {
                'ZZZL': {
                    emoji: 'ğŸ’¤',
                    name: 'ç¡è¦ºå‹äººæ ¼',
                    description: 'ä½ çš„äººæ ¼æ ¸å¿ƒæ˜¯ä¸€å€‹é¬§é˜å¾ä¸éŸ¿çš„éˆé­‚ã€‚ä½ ç›¸ä¿¡çœŸæ­£çš„åŠªåŠ›æ˜¯ç¿»èº«åˆ°æœ€èˆ’æœçš„è§’åº¦ã€‚äººéš›äº¤å¾€å°ä½ ä¾†èªªåƒå¤©æ°£é å ±ï¼šä¸æº–ä¹Ÿä¸æƒ³çœ‹ã€‚åˆ¥äººæ´»å¾—å¾ˆç´¯ï¼Œä½ æ´»å¾—å¾ˆçã€‚ä½ æœ€å¸¸èªªçš„è©±æ˜¯ã€Œå†äº”åˆ†é˜ã€èˆ‡ã€Œè›¤ï¼Œç¾åœ¨å¹¾é»ï¼Ÿã€'
                },
                'IDKT': {
                    emoji: 'ğŸ§ ',
                    name: 'æˆ‘ä¹Ÿä¸çŸ¥é“å‹',
                    description: 'ä½ ç¸½æ˜¯è™•æ–¼æº–å‚™é€²å…¥æ€è€ƒç‹€æ…‹çš„éšæ®µã€‚ä½ å°æœªä¾†å……æ»¿æ¨¡ç³Šæƒ³åƒï¼Œå°ç¾åœ¨å‰‡æ„Ÿåˆ°ç„¡æ„Ÿã€‚åˆ¥äººå•ä½ æƒ³åšä»€éº¼æ™‚ï¼Œä½ æœƒèªçœŸé»é ­ç„¶å¾Œä»€éº¼ä¹Ÿæ²’èªªã€‚ä½ æ˜¯ä¸€å¡Šæœƒè‡ªå‹•å¾…æ©Ÿçš„é›»å­å¯µç‰©ï¼šå¤–è¡¨æ­£å¸¸ï¼Œå…§éƒ¨ç©ºç™½ã€‚'
                },
                'YAWN': {
                    emoji: 'ğŸ˜ª',
                    name: 'æ‰“å“ˆæ¬ å‹äººæ ¼',
                    description: 'ä½ çš„å­˜åœ¨æ˜¯ä¸€ç¨®ä½é›»é‡ç”Ÿæ´»å“²å­¸ã€‚ä½ ä¸å–œæ­¡çˆ­è«–ï¼Œå› ç‚ºé‚£æœƒæµªè²»ç”¨ä¾†ç™¼å‘†çš„æ™‚é–“ã€‚ä½ å°ä¸–ç•Œçš„å›æ‡‰æ˜¯ï¼šã€Œå¯ä»¥å…ˆä¸è¦å—ï¼Ÿã€ä½ æœ€åš®å¾€çš„ç”Ÿæ´»æ˜¯â€”ä»€éº¼éƒ½ä¸åš®å¾€ï¼Œå› ç‚ºå¤ªéº»ç…©ã€‚'
                },
                'WTHF': {
                    emoji: 'ğŸ˜',
                    name: 'è›¤ä»€éº¼å‹äººæ ¼',
                    description: 'ä½ çš„åå°„ç¥ç¶“èˆ‡ç¤¾æœƒè„ˆçµ¡ä¹‹é–“æœ‰æ™‚å·®ã€‚å•é¡Œå°ä½ ä¾†èªªä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ç­‰ä¸‹è¦åƒä»€éº¼ã€‚ä½ æ“…é•·åœ¨é—œéµæ™‚åˆ»éœ²å‡ºã€Œè›¤ï¼Ÿã€çš„è¡¨æƒ…ï¼Œç„¶å¾Œçªç„¶çµæŸå°è©±ã€‚ä½ ä¸æ˜¯æ²’åœ¨è½ï¼Œåªæ˜¯åœ¨ç­‰éˆé­‚ä¸Šç·šã€‚'
                },
                'OKNO': {
                    emoji: 'ğŸ‘€',
                    name: 'å…¨ç›¤å¦å®šå‹äººæ ¼',
                    description: 'ä½ çš„äººç”Ÿæ…‹åº¦æ˜¯ï¼šå…ˆèªªå¥½ï¼Œä½†æˆ‘ä¸ä¸€å®šæœƒåšã€‚ä½ ç¸½æ˜¯è¡¨ç¤ºåŒæ„ï¼Œç„¶å¾Œé»˜é»˜åæ–¹å‘å‰é€²ã€‚ä½ æ˜¯åœ˜éšŠä¸­æœ€å®‰éœä½†æœ€ç¥ç§˜çš„å­˜åœ¨ï¼Œå› ç‚ºå¤§å®¶æ ¹æœ¬æä¸æ‡‚ä½ åˆ°åº•æœ‰æ²’æœ‰ä¾†éã€‚ä½ æ´»å¾—åƒé–‹æ”¾åŸå§‹ç¢¼ï¼šæ²’äººçŸ¥é“ä½ æ”¹éä»€éº¼ã€‚'
                },
                'LMAO': {
                    emoji: 'ğŸ˜‚',
                    name: 'ç¬‘çˆ›å‹äººæ ¼',
                    description: 'ä½ çš„å£é ­ç¦ªæ˜¯ã€Œæˆ‘æ²’äº‹ã€ï¼Œä½†çœ¼ç¥è£¡å·²ç¶“æ”¾æ£„æ€è€ƒã€‚ä½ ç”¨ç¬‘æ©è“‹å°·å°¬ï¼Œç”¨ç¬‘å°æŠ—ç„¡èƒ½ï¼Œç”¨ç¬‘ç¬‘é¢å°äººç”Ÿâ€”ç„¶å¾Œé»˜é»˜æ‰“é–‹å†·æ°£å¹è‡‰ã€‚ä½ çš„äººéš›é—œä¿‚åƒå‹•æ…‹ç‰†ï¼šå¥½åƒå¾ˆå¤šï¼Œä½†é»é€²å»éƒ½æ²’æœ‰äº’å‹•ã€‚'
                },
                'WTFJ': {
                    emoji: 'ğŸ“',
                    name: 'å‡è£æœ‰åœ¨è¨ˆåŠƒå‹äººæ ¼',
                    description: 'ä½ æ´»å¾—åƒä¸€æœ¬æœªå®Œçš„ç­†è¨˜æœ¬ã€‚å–œæ­¡åˆ—å‡ºè¶…å®Œæ•´è¡Œç¨‹ï¼Œä½†åŸ·è¡Œç‡è·Ÿåœ‹æœƒå‡ºå¸­ç‡ä¸€æ¨£ä½ã€‚ä½ å°äººç”Ÿçš„æŒæ§æ–¹å¼æ˜¯ã€Œå…ˆåšè¡¨æ ¼å†ç„¦æ…®ã€ã€‚ä½ ä¸æ˜¯æ²’åŠªåŠ›ï¼Œåªæ˜¯å¤ªæœƒæŠŠé‡é»æ”¾åœ¨å­—é«”å¤§å°å’Œé…è‰²ã€‚'
                },
                'LOLX': {
                    emoji: 'ğŸ¤ª',
                    name: 'å¼·è¡Œå¹½é»˜å‹äººæ ¼',
                    description: 'ä½ ç¸½æ˜¯åœ¨éŒ¯çš„æ™‚é–“è¬›å°çš„åƒåœ¾è©±ã€‚åˆ¥äººå“­ä½ ç¬‘ï¼Œåˆ¥äººç¬‘ä½ æ›´ç¬‘ã€‚ä½ ä¸æ˜¯æ²’æœ‰æƒ…ç·’ï¼Œåªæ˜¯æ°¸é ä¸çµ¦åˆ¥äººæ­£å¸¸åæ‡‰ã€‚ä½ ä»¥ç‚ºè‡ªå·±åƒç¶²è·¯è¿·å› ï¼Œçµæœå¤§å®¶ä»¥ç‚ºä½ éœ€è¦å¹«åŠ©ã€‚'
                },
                'IHML': {
                    emoji: 'ğŸ’”',
                    name: 'æˆ‘å°±çˆ›å‹äººæ ¼',
                    description: 'ä½ æ˜¯æŒ«æŠ˜çš„æ”¶è—å®¶ï¼Œæ‚²åŠ‡çš„è§€å¯Ÿå“¡ï¼Œæ”¾æ£„çš„è¡Œå‹•æ´¾ã€‚ä½ èƒ½åœ¨ä¸‰ç§’å…§è§£é‡‹å¤±æ•—åŸå› ï¼Œä½†èŠ±ä¸‰å¤©é‚„æ²’æ±ºå®šè¦ä¸è¦åŠªåŠ›ã€‚ä½ ä¸æ˜¯æ²’æœ‰æ½›åŠ›ï¼Œåªæ˜¯ä¸ç›¸ä¿¡æ½›åŠ›é€™ç¨®æ±è¥¿å€¼å¾—é–‹ç™¼ã€‚'
                },
                'SIGH': {
                    emoji: 'ğŸ˜©',
                    name: 'ç„¡è²å¹æ¯å‹äººæ ¼',
                    description: 'ä½ èªªéæœ€å¤šçš„è©±æ˜¯ã€Œå”‰ã€ï¼Œä½ æ´»å¾—åƒä¸€éƒ¨å®‰éœåˆé•·çš„ç´€éŒ„ç‰‡ã€‚ä½ ä¸æ˜¯æ‡¶ï¼Œåªæ˜¯å®³æ€•åšäº†ä¹‹å¾Œæœƒæ›´æ‡¶ã€‚ä½ å¾ˆæœ‰åŒç†å¿ƒï¼Œä½†é‚£åªæ˜¯å› ç‚ºä½ ä¹Ÿå¾ˆå¸¸å´©æ½°ã€‚ä½ çš„æƒ…ç·’åƒè“„æ°´æ± ï¼šå¹³æ™‚ä¸æµå‹•ï¼Œä¸€æ´©å°±çˆ†ã€‚'
                },
                'BRUH': {
                    emoji: 'ğŸ˜‘',
                    name: 'æ”¤æ‰‹å‹äººæ ¼',
                    description: 'ä½ å°ç”Ÿæ´»çš„ç†±æƒ…åªç¶­æŒåˆ°é¬§é˜éŸ¿çš„é‚£ä¸€åˆ»ã€‚ä½ æ“…é•·ã€Œé»é ­å‡è£æ‡‚ã€ï¼Œå¯¦éš›ä¸Šåªåœ¨ä¹åˆé¤åƒä»€éº¼ã€‚ä½ ä¸æ˜¯ä¸åŠªåŠ›ï¼Œåªæ˜¯æœƒè©•ä¼°åŠªåŠ›å€¼å’Œå¯èƒ½å¤±æ•—ç‡ç„¶å¾Œé¸æ“‡æ”¾æ£„ã€‚ä½ æœ€å¤§çš„å¼·é …æ˜¯ï¼šæŠŠæ‰€æœ‰è²¬ä»»éƒ½æ­¸çµ¦å¤©æ°£ã€‚'
                },
                'FMLQ': {
                    emoji: 'ğŸ­',
                    name: 'è‡ªèªä¸»è§’å‹äººæ ¼',
                    description: 'ä½ è¦ºå¾—å…¨ä¸–ç•Œéƒ½æ˜¯é…è§’ï¼Œè‡ªå·±çš„ç…©æƒ±æ‰æ˜¯æœ¬å­£ä¸»ç·šã€‚ä½ æœƒæ‡·ç–‘åˆ¥äººæ˜¯ä¸æ˜¯åœ¨çœ‹ä½ ï¼Œä½†å¾ä¸è€ƒæ…®è‡ªå·±æ˜¯ä¸æ˜¯å¤ªæˆ²å¤šã€‚ä½ å–œæ­¡å°è‘—é¡å­ç·´ç¿’å›æ‡‰å°·å°¬å ´é¢ï¼Œå³ä½¿ç¾å¯¦è£¡æ²’äººé³¥ä½ ã€‚'
                },
                'TMIK': {
                    emoji: 'ğŸ“¢',
                    name: 'éåº¦è§£é‡‹å‹äººæ ¼',
                    description: 'ä½ çš„äººè¨­æ˜¯è³‡è¨Šå‹NPCï¼Œåˆ¥äººå•ä½ å¹¾é»ï¼Œä½ è¬›æ™‚å€èˆ‡äººé¡å®šç¾©æ™‚é–“çš„æ­·å²ã€‚ä½ æ€•è¢«èª¤æœƒï¼Œä¹Ÿæ€•ä¸è¢«å•ï¼Œæ‰€ä»¥æœƒè‡ªå‹•é–‹å•Ÿã€Œè£œå……æ¨¡å¼ã€ã€‚ä½ çš„è…¦å…§æœ‰æ°¸ä¸æ‰“çƒŠçš„èªéŸ³å°èˆªï¼Œé‚„ä¸èƒ½é—œéœéŸ³ã€‚'
                },
                'AFKZ': {
                    emoji: 'ğŸƒâ€â™‚ï¸',
                    name: 'ç¥éš±å‹äººæ ¼',
                    description: 'ä½ æ˜¯ç¤¾äº¤å ´åˆçš„æ®˜å½±ï¼Œé»åç³»çµ±çš„å¤©æ•µã€‚ä½ å‡ºç¾åœ¨ç¾¤çµ„åªç‚ºæ‰“å€‹ã€Œå¥½ã€ï¼Œç„¶å¾Œå†æ¶ˆå¤±åŠå¹´ã€‚ä½ ä¸æ˜¯ä¸å–œæ­¡å¤§å®¶ï¼Œåªæ˜¯ä¸å–œæ­¡å¤§å®¶çŸ¥é“ä½ å–œä¸å–œæ­¡å¤§å®¶ã€‚ä½ çš„äººè¨­æ˜¯ï¼šå‡ºç¾æ²’äººé©šå–œï¼Œæ¶ˆå¤±å¤§å®¶å®‰å¿ƒã€‚'
                },
                'OOPS': {
                    emoji: 'ğŸ’¥',
                    name: 'æ‡µæ‡‚è¡Œå‹•æ´¾äººæ ¼',
                    description: 'ä½ çš„äººç”Ÿå“²å­¸æ˜¯ï¼šã€Œå…ˆå‹•å†èªªï¼Œå‡ºäº‹å†ä¿®ã€‚ã€ä½ ä¸æ˜¯ä¸æ€•éŒ¯ï¼Œåªæ˜¯ä¸çŸ¥é“å“ªè£¡æœƒéŒ¯ã€‚ä½ è¡å¾—å¿«ï¼Œæ‘”å¾—å¿«ï¼Œç¬‘å¾—ä¹Ÿå¿«ã€‚ä½ ç¶“å¸¸èªªï¼šã€Œå•Šæˆ‘ä»¥ç‚ºé€™æ¨£å¯ä»¥æ¬¸ï¼Ÿã€ç„¶å¾Œå…¨å ´æ²‰é»˜ã€‚'
                },
                '???!': {
                    emoji: 'â“',
                    name: 'å•è™Ÿå‹äººæ ¼',
                    description: 'ä½ ä¸æ˜¯æ´»åœ¨ä¸–ç•Œè£¡ï¼Œè€Œæ˜¯æ´»åœ¨æ¯å€‹ã€Œç‚ºä»€éº¼ã€è£¡ã€‚ä½ åƒä¸€å€‹èµ°å¤±çš„Wi-Fiè¨Šè™Ÿï¼Œç¸½æ˜¯åœ¨å˜—è©¦ç†è§£ä½†å§‹çµ‚é€£ä¸ä¸Šé‚è¼¯ã€‚ä½ ä¸æ˜¯æ²’æƒ³æ³•ï¼Œåªæ˜¯ä½ çš„æƒ³æ³•æ²’äººèƒ½è§£ç¢¼ã€‚ä½ çš„äººç”Ÿæ˜¯ä¸€ä¸²æœªè§£æçš„è®Šæ•¸ã€‚'
                }
            };

            // åŸå§‹å•é¡Œè³‡æ–™
            let allQuestions = [];
            
            // ç•¶å‰æ¸¬é©—ä½¿ç”¨çš„å•é¡Œ
            let currentQuestions = [];
            let currentQuestion = 0;
            let userAnswers = [];
            
            // è¼‰å…¥ CSV æª”æ¡ˆ
            async function loadQuestions() {
                try {
                    const response = await fetch('100_______.csv');
                    if (!response.ok) {
                        throw new Error('ç„¡æ³•è¼‰å…¥é¡Œç›®æª”æ¡ˆ');
                    }
                    const csvText = await response.text();
                    const lines = csvText.trim().split('\n').slice(1); // è·³éæ¨™é¡Œè¡Œä¸¦ç§»é™¤ç©ºè¡Œ
                    
                    allQuestions = lines.filter(line => line.trim()).map(line => {
                        const [id, question, optionA, tagA, optionB, tagB] = line.split(',').map(item => item.trim());
                        if (!question || !optionA || !optionB) {
                            throw new Error('é¡Œç›®è³‡æ–™æ ¼å¼éŒ¯èª¤');
                        }
                        return {
                            id,
                            question,
                            options: [
                                { text: optionA, tag: tagA },
                                { text: optionB, tag: tagB }
                            ]
                        };
                    });
                    
                    if (allQuestions.length === 0) {
                        throw new Error('æ²’æœ‰å¯ç”¨çš„é¡Œç›®');
                    }

                    // éš¨æ©Ÿé¸æ“‡é¡Œç›®
                    shuffleArray(allQuestions);
                    currentQuestions = allQuestions.slice(0, 10); // é¸æ“‡10é¡Œ
                    showQuestion();
                } catch (error) {
                    console.error('è¼‰å…¥é¡Œç›®æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                    alert('è¼‰å…¥é¡Œç›®æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡æ–°æ•´ç†é é¢æˆ–è¯ç¹«ç®¡ç†å“¡ã€‚');
                    // é‡æ–°é–‹å§‹æ¸¬é©—
                    retakeTest();
                }
            }

            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            async function startTest() {
                if (allQuestions.length === 0) {
                    await loadQuestions();
                }
                
                // å¾æ‰€æœ‰å•é¡Œä¸­éš¨æ©Ÿé¸æ“‡10é¡Œ
                currentQuestions = allQuestions.slice(0, 10);
                shuffleArray(currentQuestions);
                
                currentQuestion = 0;
                userAnswers = [];
                document.getElementById('start-page').style.display = 'none';
                document.getElementById('question-page').style.display = 'block';
                showQuestion();
            }

            function showQuestion() {
                if (!currentQuestions || currentQuestions.length === 0) {
                    console.error('æ²’æœ‰å¯ç”¨çš„é¡Œç›®');
                    alert('è¼‰å…¥é¡Œç›®æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡æ–°æ•´ç†é é¢ã€‚');
                    retakeTest();
                    return;
                }

                try {
                    const questionData = currentQuestions[currentQuestion];
                    if (!questionData) {
                        throw new Error('ç„¡æ•ˆçš„é¡Œç›®è³‡æ–™');
                    }

                    const progressPercentage = (currentQuestion / currentQuestions.length) * 100;
                    document.getElementById('progress-fill').style.width = `${progressPercentage}%`;
                    document.getElementById('question-text').textContent = questionData.question;

                    const optionButtons = document.getElementsByClassName('option-btn');
                    optionButtons[0].textContent = questionData.options[0].text;
                    optionButtons[1].textContent = questionData.options[1].text;

                    document.getElementById('question-page').style.display = 'block';
                } catch (error) {
                    console.error('é¡¯ç¤ºé¡Œç›®æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                    alert('é¡¯ç¤ºé¡Œç›®æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡æ–°é–‹å§‹æ¸¬é©—ã€‚');
                    retakeTest();
                }
            }

            function selectOption(optionIndex) {
                try {
                    if (!currentQuestions[currentQuestion]) {
                        throw new Error('ç„¡æ•ˆçš„é¡Œç›®');
                    }
                    
                    userAnswers.push({
                        answer: optionIndex,
                        tag: currentQuestions[currentQuestion].options[optionIndex].tag
                    });
                    
                    if (currentQuestion < currentQuestions.length - 1) {
                        currentQuestion++;
                        showQuestion();
                    } else {
                        showResult();
                    }
                } catch (error) {
                    console.error('é¸æ“‡é¸é …æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                    alert('é¸æ“‡é¸é …æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡æ–°é–‹å§‹æ¸¬é©—ã€‚');
                    retakeTest();
                }
            }

            function analyzeTags(answers) {
                const tagCounts = {};
                answers.forEach(answer => {
                    const tag = answer.tag;
                    tagCounts[tag] = (tagCounts[tag] || 0) + 1;
                });
                
                // æ‰¾å‡ºæœ€å¤šçš„æ¨™ç±¤
                let maxCount = 0;
                let dominantTag = '';
                for (const [tag, count] of Object.entries(tagCounts)) {
                    if (count > maxCount) {
                        maxCount = count;
                        dominantTag = tag;
                    }
                }
                return dominantTag;
            }

            function getRandomItems(array, count) {
                const shuffled = [...array].sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }

            function generateRandomColor() {
                try {
                    const hue = Math.floor(Math.random() * 360);
                    return `hsl(${hue}, 70%, 90%)`;
                } catch (error) {
                    console.error('ç”Ÿæˆé¡è‰²æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                    return '#f0f0f0'; // é è¨­é¡è‰²
                }
            }

            const personalityTags = {
                'æˆ²ç²¾': ['FMLQ', 'LMAO', 'LOLX'],
                'è‡ªæˆ€': ['TMIK', 'FMLQ', 'LOLX'],
                'è£æ‡‚': ['TMIK', 'WTFJ', 'OOPS'],
                'æ‡¶é¬¼': ['ZZZL', 'YAWN', 'AFKZ'],
                'æ··äº‚': ['IDKT', 'OOPS', '???!'],
                'æ²’æ•‘': ['IHML', 'BRUH', 'SIGH']
            };

            function showTab(tabName) {
                const pages = {
                    'test': 'test-page',
                    'personalities': 'personalities-page',
                    'testimonials': 'testimonials-page',
                    'faq': 'faq-page'
                };

                // Hide all pages
                Object.values(pages).forEach(pageId => {
                    document.getElementById(pageId).style.display = 'none';
                });

                // Show selected page
                document.getElementById(pages[tabName]).style.display = 'block';

                // Update active tab
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                event.target.classList.add('active');

                if (tabName === 'personalities') {
                    displayAllPersonalities();
                }
            }

            function displayAllPersonalities() {
                try {
                    const container = document.getElementById('personality-list');
                    if (!container) {
                        throw new Error('æ‰¾ä¸åˆ°æ€§æ ¼åˆ—è¡¨å®¹å™¨');
                    }
                    
                    container.innerHTML = '';
                    
                    Object.entries(mbtiTypes).forEach(([code, data]) => {
                        if (!data || !data.emoji || !data.name || !data.description) {
                            throw new Error(`æ€§æ ¼é¡å‹ ${code} è³‡æ–™ä¸å®Œæ•´`);
                        }

                        const div = document.createElement('div');
                        div.className = 'personality-item';
                        div.innerHTML = `
                            <div class="d-flex align-items-center mb-3">
                                <span class="personality-emoji" style="font-size: 2em; margin-right: 0.5rem;">${data.emoji}</span>
                                <h3 class="personality-code mb-0">${code}</h3>
                            </div>
                            <h4 class="personality-name mb-2">${data.name}</h4>
                            <p class="personality-description mb-0">${data.description}</p>
                        `;
                        container.appendChild(div);
                    });
                } catch (error) {
                    console.error('é¡¯ç¤ºæ‰€æœ‰æ€§æ ¼æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                    const container = document.getElementById('personality-list');
                    if (container) {
                        container.innerHTML = '<p class="text-danger">è¼‰å…¥æ€§æ ¼è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡æ–°æ•´ç†é é¢</p>';
                    }
                }
            }

            function showResult() {
                try {
                    // éš±è—é–‹å§‹é é¢å’Œå•é¡Œé é¢
                    document.getElementById('start-page').style.display = 'none';
                    document.getElementById('question-page').style.display = 'none';
                    
                    // é¡¯ç¤ºçµæœé é¢
                    document.getElementById('result-page').style.display = 'block';
                    
                    const dominantTag = analyzeTags(userAnswers);
                    const possibleTypes = personalityTags[dominantTag] || [];
                    const selectedType = possibleTypes[Math.floor(Math.random() * possibleTypes.length)] || 'IDKT';
                    const result = mbtiTypes[selectedType];
                    
                    // æ›´æ–°çµæœé¡¯ç¤º
                    document.getElementById('mbti-emoji').textContent = result.emoji;
                    document.getElementById('mbti-result').textContent = selectedType;
                    document.getElementById('mbti-description').textContent = result.description;
                    
                    // å¦‚æœéœ€è¦çš„è©±ï¼Œå‰µå»ºåœ–è¡¨
                    createPersonalityChart();
                } catch (error) {
                    console.error('é¡¯ç¤ºçµæœæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                    alert('é¡¯ç¤ºçµæœæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡æ–°é–‹å§‹æ¸¬é©—ã€‚');
                    retakeTest();
                }
            }

            function updateCompatibilityChart(personalityType) {
                try {
                    if (!personalityType) {
                        throw new Error('æœªæä¾›æ€§æ ¼é¡å‹');
                    }

                    const compatibilityData = {
                        'ZZZL': {
                            good: ['YAWN', 'OKNO'],
                            bad: ['FMLQ', 'TMIK']
                        },
                        'IDKT': {
                            good: ['OOPS', '???!'],
                            bad: ['LMAO', 'WTFJ']
                        },
                        'YAWN': {
                            good: ['ZZZL', 'OKNO'],
                            bad: ['FMLQ', 'TMIK']
                        },
                        'WTHF': {
                            good: ['OOPS', '???!'],
                            bad: ['LMAO', 'WTFJ']
                        },
                        'OKNO': {
                            good: ['ZZZL', 'YAWN'],
                            bad: ['FMLQ', 'TMIK']
                        },
                        'LMAO': {
                            good: ['WTFJ', 'LOLX'],
                            bad: ['IHML', 'SIGH']
                        },
                        'WTFJ': {
                            good: ['LMAO', 'LOLX'],
                            bad: ['IHML', 'SIGH']
                        },
                        'LOLX': {
                            good: ['LMAO', 'WTFJ'],
                            bad: ['IHML', 'SIGH']
                        },
                        'IHML': {
                            good: ['SIGH', 'BRUH'],
                            bad: ['FMLQ', 'TMIK']
                        },
                        'SIGH': {
                            good: ['IHML', 'BRUH'],
                            bad: ['FMLQ', 'TMIK']
                        },
                        'BRUH': {
                            good: ['IHML', 'SIGH'],
                            bad: ['FMLQ', 'TMIK']
                        },
                        'FMLQ': {
                            good: ['TMIK', 'WTFJ'],
                            bad: ['ZZZL', 'YAWN']
                        },
                        'TMIK': {
                            good: ['FMLQ', 'WTFJ'],
                            bad: ['ZZZL', 'YAWN']
                        },
                        'AFKZ': {
                            good: ['ZZZL', 'YAWN'],
                            bad: ['FMLQ', 'TMIK']
                        },
                        'OOPS': {
                            good: ['IDKT', 'WTHF'],
                            bad: ['LMAO', 'WTFJ']
                        },
                        '???!': {
                            good: ['IDKT', 'WTHF'],
                            bad: ['LMAO', 'WTFJ']
                        }
                    };

                    // æ›´æ–°ç›¸å®¹æ€§åœ–è¡¨å…§å®¹
                    const data = compatibilityData[personalityType] || {
                        good: ['LMAO', 'WTFJ'],
                        bad: ['SIGH', 'BRUH']
                    };

                    const goodContainer = document.querySelector('.compatibility-good');
                    const badContainer = document.querySelector('.compatibility-bad');

                    if (!goodContainer || !badContainer) {
                        throw new Error('æ‰¾ä¸åˆ°ç›¸å®¹æ€§åœ–è¡¨å®¹å™¨');
                    }

                    goodContainer.innerHTML = '<h4>æœ€ä½³æ‹æª”</h4>';
                    badContainer.innerHTML = '<h4>ç½é›£çµ„åˆ</h4>';

                    data.good.forEach(type => {
                        const personality = mbtiTypes[type];
                        if (personality) {
                            goodContainer.innerHTML += `
                                <div class="compatibility-item">
                                    <p class="mb-1"><strong>${type}</strong> (${personality.name})</p>
                                    <small class="text-muted">${personality.emoji}</small>
                            </div>`;
                        }
                    });

                    data.bad.forEach(type => {
                        const personality = mbtiTypes[type];
                        if (personality) {
                            badContainer.innerHTML += `
                                <div class="compatibility-item">
                                    <p class="mb-1"><strong>${type}</strong> (${personality.name})</p>
                                    <small class="text-muted">${personality.emoji}</small>
                            </div>`;
                        }
                    });
                } catch (error) {
                    console.error('æ›´æ–°ç›¸å®¹æ€§åœ–è¡¨æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                    const containers = document.querySelectorAll('.compatibility-good, .compatibility-bad');
                    containers.forEach(container => {
                        if (container) {
                            container.innerHTML = '<p class="text-danger">è¼‰å…¥ç›¸å®¹æ€§è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤</p>';
                        }
                    });
                }
            }

            function shareResult() {
                const mbtiResult = document.getElementById('mbti-result').textContent;
                const description = document.getElementById('mbti-description').textContent;
                const shareText = `æˆ‘çš„MBTIæ¸¬é©—çµæœï¼š${mbtiResult}\n\n${description}\n\nå¿«ä¾†æ¸¬æ¸¬ä½ æ˜¯å“ªç¨®æ²™é›•äººæ ¼ï¼`;
                
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('çµæœå·²è¤‡è£½åˆ°å‰ªè²¼æ¿ï¼');
                });
            }

            function retakeTest() {
                currentQuestion = 0;
                userAnswers = [];
                document.getElementById('result-page').style.display = 'none';
                document.getElementById('start-page').style.display = 'block';
                document.getElementById('question-page').style.display = 'none';
            }
        </script>
    </body>
</html>
